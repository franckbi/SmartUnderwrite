meta {
  name: Get Application by ID
  type: http
  seq: 3
}

get {
  url: {{baseUrl}}/api/applications/{{testApplicationId}}
  body: none
  auth: bearer
}

auth:bearer {
  token: {{affiliateToken}}
}

assert {
  res.status: eq 200
  res.body.id: eq {{testApplicationId}}
  res.body.applicant: isDefined
  res.body.amount: isDefined
  res.body.status: isDefined
}

tests {
  test("Get application by ID returns application details", function() {
    expect(res.status).to.equal(200);
    expect(res.body.id).to.be.a("number");
    expect(res.body.applicant).to.be.an("object");
    expect(res.body.amount).to.be.a("number");
    expect(res.body.status).to.be.a("string");
    expect(res.body.productType).to.be.a("string");
    expect(res.body.incomeMonthly).to.be.a("number");
    expect(res.body.createdAt).to.be.a("string");
    
    // Validate applicant object
    expect(res.body.applicant.firstName).to.be.a("string");
    expect(res.body.applicant.lastName).to.be.a("string");
    expect(res.body.applicant.email).to.be.a("string");
    expect(res.body.applicant.address).to.be.an("object");
  });
}